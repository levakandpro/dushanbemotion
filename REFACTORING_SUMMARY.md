# Р РµР·СЋРјРµ СЂРµС„Р°РєС‚РѕСЂРёРЅРіР° СЂРµРґР°РєС‚РѕСЂР°

## вњ… Р’С‹РїРѕР»РЅРµРЅРЅС‹Рµ Р·Р°РґР°С‡Рё

### Р­РўРђРџ 1: РЈРїСЂР°РІР»РµРЅРёРµ РїСЂРѕРµРєС‚РѕРј

#### 1.1. РЎС‚СЂСѓРєС‚СѓСЂР° РґР°РЅРЅС‹С… РїСЂРѕРµРєС‚Р° вњ…
- РРЅС‚РµСЂС„РµР№СЃ `EditorProject` РїСЂРѕРІРµСЂРµРЅ Рё СЃРѕРѕС‚РІРµС‚СЃС‚РІСѓРµС‚ С‚СЂРµР±РѕРІР°РЅРёСЏРј
- Р’СЃРµ РїРѕР»СЏ РїСЂРѕРµРєС‚Р° СѓРЅРёС„РёС†РёСЂРѕРІР°РЅС‹
- РћР±СЂР°С‚РЅР°СЏ СЃРѕРІРјРµСЃС‚РёРјРѕСЃС‚СЊ СЃРѕС…СЂР°РЅРµРЅР° С‡РµСЂРµР· РјРёРіСЂР°С†РёРё

#### 1.2. РђРІС‚РѕСЃРѕС…СЂР°РЅРµРЅРёРµ вњ…
- Р РµР°Р»РёР·РѕРІР°РЅРѕ РІ `src/editorV2/utils/projectPersistence.js`
- Debounce 3 СЃРµРєСѓРЅРґС‹ РјРµР¶РґСѓ СЃРѕС…СЂР°РЅРµРЅРёСЏРјРё
- РҐСЂР°РЅРµРЅРёРµ РІ localStorage РїРѕРґ РєР»СЋС‡РѕРј `dmotion:project:<projectId>`
- РђРІС‚РѕРјР°С‚РёС‡РµСЃРєРѕРµ РѕР±РЅРѕРІР»РµРЅРёРµ `updatedAt` РїСЂРё СЃРѕС…СЂР°РЅРµРЅРёРё

#### 1.3. Undo / Redo вњ…
- Р РµР°Р»РёР·РѕРІР°РЅРѕ РІ `src/editorV2/utils/historyStore.js`
- Р“РѕСЂСЏС‡РёРµ РєР»Р°РІРёС€Рё: Ctrl+Z / Cmd+Z (undo), Ctrl+Shift+Z / Cmd+Shift+Z (redo)
- РњР°РєСЃРёРјР°Р»СЊРЅР°СЏ РіР»СѓР±РёРЅР° СЃС‚РµРєР°: 150 СЃРѕСЃС‚РѕСЏРЅРёР№
- РҐСЂР°РЅРµРЅРёРµ С†РµР»С‹С… СЃРѕСЃС‚РѕСЏРЅРёР№ РїСЂРѕРµРєС‚Р°

#### 1.4. Share-СЃСЃС‹Р»РєР° РїСЂРѕРµРєС‚Р° вњ…
- РЎРµСЂРІРёСЃ: `src/editorV2/utils/projectShareService.js`
- View route: `/view/:shareId` РІ `src/App.jsx`
- РљРѕРјРїРѕРЅРµРЅС‚ РїСЂРѕСЃРјРѕС‚СЂР°: `src/editorV2/view/ViewProjectScreen.jsx`
- РњРѕРґР°Р»РєР° СЃРѕР·РґР°РЅРёСЏ: `src/editorV2/modals/ShareProjectModal.jsx`
- РљРЅРѕРїРєР° "РџРѕРґРµР»РёС‚СЊСЃСЏ" РІ HeaderBar

### Р­РўРђРџ 2: РњРµРЅРµРґР¶РµСЂ Р°СЃСЃРµС‚РѕРІ

#### 2.1. Р•РґРёРЅС‹Р№ С„РѕСЂРјР°С‚ Р°СЃСЃРµС‚РѕРІ вњ…
- РРЅС‚РµСЂС„РµР№СЃ `Asset` РІ `src/editorV2/types/assetTypes.js`
- РђРґР°РїС‚РµСЂС‹ РґР»СЏ СЂР°Р·РЅС‹С… С‚РёРїРѕРІ:
  - `adaptStickerToAsset` - СЃС‚РёРєРµСЂС‹ РёР· РјР°РЅРёС„РµСЃС‚Р°
  - `adaptFrameToAsset` - СЂР°РјРєРё РёР· Pixabay
  - `adaptFootageToAsset` - С„СѓС‚Р°Р¶Рё РёР· Pexels

#### 2.2. Р•РґРёРЅС‹Р№ assetsStore вњ…
- Р РµР°Р»РёР·РѕРІР°РЅ РІ `src/editorV2/store/assetsStore.js`
- РљСЌС€РёСЂРѕРІР°РЅРёРµ РІ РїР°РјСЏС‚Рё
- Р-Р°РіСЂСѓР·РєР° СЃС‚РёРєРµСЂРѕРІ, СЂР°РјРѕРє, С„СѓС‚Р°Р¶РµР№
- Singleton РїР°С‚С‚РµСЂРЅ

#### 2.3. РџРѕРёСЃРє Рё С„РёР»СЊС‚СЂС‹ вњ…
- РњРµС‚РѕРґ `searchAssets` РІ assetsStore
- РљРѕРјРїРѕРЅРµРЅС‚ `AssetSearchBar` РґР»СЏ UI
- Р¤РёР»СЊС‚СЂС‹: РєР°С‚РµРіРѕСЂРёСЏ, С‚РµРіРё, РїРѕР», РїСЂРµРјРёСѓРј СЃС‚Р°С‚СѓСЃ

#### 2.4. Premium-Р»РѕРіРёРєР° вњ…
- РљРѕРјРїРѕРЅРµРЅС‚ `PremiumAssetOverlay` РґР»СЏ Р·Р°С‚РµРјРЅРµРЅРёСЏ Рё Р·Р°РјРєР°
- РњРѕРґР°Р»РєР° РїРѕРґРїРёСЃРєРё РїСЂРё РєР»РёРєРµ РЅР° РїСЂРµРјРёСѓРј-Р°СЃСЃРµС‚
- Р¤Р»Р°Рі `isPremium` РІ РёРЅС‚РµСЂС„РµР№СЃРµ Asset

### Р­РўРђРџ 3: РљРѕРЅС‚СЂРѕР»СЊ РєР°С‡РµСЃС‚РІР°

#### 3.1. Р›РѕР°РґРµСЂС‹ вњ…
- РЈРЅРёРІРµСЂСЃР°Р»СЊРЅС‹Р№ РєРѕРјРїРѕРЅРµРЅС‚ `Loader` РІ `src/editorV2/components/Loader.jsx`
- РљРѕРјРїРѕРЅРµРЅС‚ `ExportLoader` РґР»СЏ СЌРєСЃРїРѕСЂС‚Р° СЃ СЃС‚Р°С‚СѓСЃР°РјРё
- Р Р°Р·РјРµСЂС‹: small, medium, large
- Р РµР¶РёРј fullscreen

#### 3.2. РћР±СЂР°Р±РѕС‚РєР° РѕС€РёР±РѕРє вњ…
- Р•РґРёРЅС‹Р№ РјРѕРґСѓР»СЊ `errorStore` РІ `src/editorV2/store/errorStore.js`
- РљРѕРјРїРѕРЅРµРЅС‚ `ErrorDisplay` РґР»СЏ РѕС‚РѕР±СЂР°Р¶РµРЅРёСЏ РѕС€РёР±РѕРє
- РўРёРїС‹ РѕС€РёР±РѕРє: MANIFEST_LOAD_FAILED, PROJECT_LOAD_FAILED, EXPORT_FAILED, Рё РґСЂ.
- РљРЅРѕРїРєР° "РџРѕРІС‚РѕСЂРёС‚СЊ" РґР»СЏ retryable РѕС€РёР±РѕРє

## рџ“Ѓ РЎРѕР·РґР°РЅРЅС‹Рµ С„Р°Р№Р»С‹

### РљРѕРјРїРѕРЅРµРЅС‚С‹
- `src/editorV2/components/AssetSearchBar.jsx` - РїРѕРёСЃРє Рё С„РёР»СЊС‚СЂС‹
- `src/editorV2/components/PremiumAssetOverlay.jsx` - РїСЂРµРјРёСѓРј-Р°СЃСЃРµС‚С‹
- `src/editorV2/components/Loader.jsx` - СѓРЅРёРІРµСЂСЃР°Р»СЊРЅС‹Р№ Р»РѕР°РґРµСЂ
- `src/editorV2/components/ErrorDisplay.jsx` - РѕС‚РѕР±СЂР°Р¶РµРЅРёРµ РѕС€РёР±РѕРє

### РўРёРїС‹ Рё Store
- `src/editorV2/types/assetTypes.js` - РёРЅС‚РµСЂС„РµР№СЃС‹ Asset
- `src/editorV2/store/assetsStore.js` - РјРµРЅРµРґР¶РµСЂ Р°СЃСЃРµС‚РѕРІ
- `src/editorV2/store/errorStore.js` - РѕР±СЂР°Р±РѕС‚РєР° РѕС€РёР±РѕРє

### View Рё РјРѕРґР°Р»РєРё
- `src/editorV2/view/ViewProjectScreen.jsx` - РїСЂРѕСЃРјРѕС‚СЂ shared РїСЂРѕРµРєС‚РѕРІ
- `src/editorV2/modals/ShareProjectModal.jsx` - СЃРѕР·РґР°РЅРёРµ share-СЃСЃС‹Р»РѕРє

### РЎС‚РёР»Рё
- Р’СЃРµ CSS С„Р°Р№Р»С‹ РґР»СЏ РЅРѕРІС‹С… РєРѕРјРїРѕРЅРµРЅС‚РѕРІ

## рџ”„ РћР±РЅРѕРІР»РµРЅРЅС‹Рµ С„Р°Р№Р»С‹

- `src/App.jsx` - РґРѕР±Р°РІР»РµРЅ СЂРѕСѓС‚РёРЅРі РґР»СЏ `/view/:shareId`
- `src/editorV2/EditorV2Screen.jsx` - РёРЅС‚РµРіСЂР°С†РёСЏ ErrorDisplay Рё ShareProjectModal
- `src/editorV2/layout/HeaderBar.jsx` - РєРЅРѕРїРєР° "РџРѕРґРµР»РёС‚СЊСЃСЏ"
- `src/editorV2/layout/EditorShell.jsx` - РїРѕРґРґРµСЂР¶РєР° onShare Рё isReadOnly

## рџ“ќ РџСЂРёРјРµС‡Р°РЅРёСЏ

1. **РћР±СЂР°С‚РЅР°СЏ СЃРѕРІРјРµСЃС‚РёРјРѕСЃС‚СЊ**: Р’СЃРµ РёР·РјРµРЅРµРЅРёСЏ СЃРѕС…СЂР°РЅСЏСЋС‚ СЃРѕРІРјРµСЃС‚РёРјРѕСЃС‚СЊ СЃРѕ СЃС‚Р°СЂС‹Рј РєРѕРґРѕРј
2. **РњРёРіСЂР°С†РёРё**: РђРІС‚РѕРјР°С‚РёС‡РµСЃРєР°СЏ РјРёРіСЂР°С†РёСЏ СЃС‚Р°СЂС‹С… С„РѕСЂРјР°С‚РѕРІ РїСЂРѕРµРєС‚РѕРІ
3. **Singleton РїР°С‚С‚РµСЂРЅ**: assetsStore Рё errorStore РёСЃРїРѕР»СЊР·СѓСЋС‚ singleton РґР»СЏ РµРґРёРЅРѕРіРѕ СЃРѕСЃС‚РѕСЏРЅРёСЏ
4. **РљСЌС€РёСЂРѕРІР°РЅРёРµ**: РђСЃСЃРµС‚С‹ РєСЌС€РёСЂСѓСЋС‚СЃСЏ РІ РїР°РјСЏС‚Рё РґРѕ РїРµСЂРµР·Р°РіСЂСѓР·РєРё СЃС‚СЂР°РЅРёС†С‹

## рџљЂ РЎР»РµРґСѓСЋС‰РёРµ С€Р°РіРё (РѕРїС†РёРѕРЅР°Р»СЊРЅРѕ)

1. РРЅС‚РµРіСЂРёСЂРѕРІР°С‚СЊ `AssetSearchBar` РІ РїР°РЅРµР»Рё СЃС‚РёРєРµСЂРѕРІ, СЂР°РјРѕРє, С„СѓС‚Р°Р¶РµР№
2. РСЃРїРѕР»СЊР·РѕРІР°С‚СЊ `Loader` РІРјРµСЃС‚Рѕ Р»РѕРєР°Р»СЊРЅС‹С… Р»РѕР°РґРµСЂРѕРІ
3. РСЃРїРѕР»СЊР·РѕРІР°С‚СЊ `errorStore` РґР»СЏ РІСЃРµС… РѕС€РёР±РѕРє РІРјРµСЃС‚Рѕ console.error
4. Р”РѕР±Р°РІРёС‚СЊ СЃРёСЃС‚РµРјСѓ РїРѕРґРїРёСЃРєРё РґР»СЏ Premium-Р»РѕРіРёРєРё
5. РћРїС‚РёРјРёР·РёСЂРѕРІР°С‚СЊ РїСЂРѕРёР·РІРѕРґРёС‚РµР»СЊРЅРѕСЃС‚СЊ (throttle/debounce РґР»СЏ drag/resize)

