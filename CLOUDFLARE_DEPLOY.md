# –î–µ–ø–ª–æ–π DushanbeMotion –Ω–∞ Cloudflare Pages

## –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –¥–µ–ø–ª–æ—é –Ω–∞ Cloudflare Pages:

- ‚úÖ Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
- ‚úÖ `.gitignore` –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ `vite.config.js` –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω
- ‚úÖ `_headers` –∏ `_redirects` —Å–æ–∑–¥–∞–Ω—ã –≤ `public/`
- ‚úÖ Build –∫–æ–º–∞–Ω–¥–∞ –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
dushanbemotion/
‚îú‚îÄ‚îÄ src/                    # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
‚îú‚îÄ‚îÄ public/                 # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ _headers           # HTTP –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è Cloudflare Pages
‚îÇ   ‚îî‚îÄ‚îÄ _redirects         # –ü—Ä–∞–≤–∏–ª–∞ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤ (SPA fallback)
‚îú‚îÄ‚îÄ dist/                   # –ü—Ä–æ–¥–∞–∫—à–Ω –±–∏–ª–¥ (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è)
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ vite.config.js
‚îî‚îÄ‚îÄ .gitignore
```

## –®–∞–≥ 1: –ö–æ–º–º–∏—Ç –∏ –ø—É—à –≤ Git

```bash
# –î–æ–±–∞–≤–∏—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã
git add .

# –°–æ–∑–¥–∞—Ç—å –∫–æ–º–º–∏—Ç
git commit -m "Initial commit: DushanbeMotion editor ready for deploy"

# –î–æ–±–∞–≤–∏—Ç—å —É–¥–∞–ª–µ–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Å–≤–æ–π URL)
git remote add origin https://github.com/YOUR_USERNAME/dushanbemotion.git

# –ó–∞–ø—É—à–∏—Ç—å –≤ GitHub
git push -u origin main
```

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –ï—Å–ª–∏ –≤–∞—à–∞ –≤–µ—Ç–∫–∞ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è `master`, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `git push -u origin master`

## –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –≤ Cloudflare Pages

1. –í–æ–π–¥–∏—Ç–µ –≤ [Cloudflare Dashboard](https://dash.cloudflare.com/)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **Pages**
3. –ù–∞–∂–º–∏—Ç–µ **Create a project**
4. –í—ã–±–µ—Ä–∏—Ç–µ **Connect to Git**
5. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ GitHub/GitLab –∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `dushanbemotion`

## –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Build

–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞ —É–∫–∞–∂–∏—Ç–µ:

### Build Configuration

- **Framework preset**: `Vite`
- **Build command**: `npm run build`
- **Build output directory**: `dist`
- **Root directory**: `/` (–æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º)

### Environment Variables (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã)

–ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è, –¥–æ–±–∞–≤—å—Ç–µ –∏—Ö:

```
VITE_SUPABASE_URL=your_supabase_url
VITE_SUPABASE_ANON_KEY=your_supabase_key
VITE_R2_STICKERS_URL=https://pub-78c4a70555844788bca12cc4cee974d4.r2.dev
VITE_R2_SCENES_URL=https://pub-b69ef7c5697c44e2ab311a83cae5c18a.r2.dev
```

> **–í–∞–∂–Ω–æ**: –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è Vite –¥–æ–ª–∂–Ω—ã –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `VITE_`

## –®–∞–≥ 4: –î–µ–ø–ª–æ–π

1. –ù–∞–∂–º–∏—Ç–µ **Save and Deploy**
2. Cloudflare Pages –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
   - –ö–ª–æ–Ω–∏—Ä—É–µ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (`npm install`)
   - –ó–∞–ø—É—Å—Ç–∏—Ç –±–∏–ª–¥ (`npm run build`)
   - –ó–∞–¥–µ–ø–ª–æ–∏—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `dist/`

## –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ–ø–ª–æ—è

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è:

1. Cloudflare –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç URL –≤–∏–¥–∞: `https://dushanbemotion.pages.dev`
2. –û—Ç–∫—Ä–æ–π—Ç–µ URL –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
   - ‚úÖ –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
   - ‚úÖ –†–æ—É—Ç–∏–Ω–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç (–ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏)
   - ‚úÖ –†–µ–¥–∞–∫—Ç–æ—Ä –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
   - ‚úÖ –°—Ç–∏–∫–µ—Ä—ã –∏ —Ñ–æ–Ω—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Custom Domain (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Custom domains**
2. –ù–∞–∂–º–∏—Ç–µ **Set up a custom domain**
3. –í–≤–µ–¥–∏—Ç–µ –≤–∞—à –¥–æ–º–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, `dushanbemotion.com`)
4. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ DNS

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π

Cloudflare Pages –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ø–ª–æ–∏—Ç:

- **Production**: –ü—Ä–∏ –ø—É—à–µ –≤ –≤–µ—Ç–∫—É `main` –∏–ª–∏ `master`
- **Preview**: –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ Pull Request

## –õ–æ–∫–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

```bash
# –°–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
npm run build

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∏–ª–¥ –ª–æ–∫–∞–ª—å–Ω–æ
npm run preview
```

–û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:4173` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–¥–∞–∫—à–Ω –≤–µ—Ä—Å–∏–∏.

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: 404 –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

**–†–µ—à–µ–Ω–∏–µ**: –§–∞–π–ª `public/_redirects` –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å:
```
/*    /index.html   200
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ë–æ–ª—å—à–æ–π —Ä–∞–∑–º–µ—Ä –±–∞–Ω–¥–ª–∞

**–†–µ—à–µ–Ω–∏–µ**: –í `vite.config.js` —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω code splitting:
```javascript
rollupOptions: {
  output: {
    manualChunks: {
      'react-vendor': ['react', 'react-dom', 'react-router-dom'],
      'editor': ['zustand', 'react-colorful'],
    }
  }
}
```

### –ü—Ä–æ–±–ª–µ–º–∞: CORS –æ—à–∏–±–∫–∏ —Å R2

**–†–µ—à–µ–Ω–∏–µ**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö R2 bucket –≤–∫–ª—é—á–µ–Ω CORS:
```json
[
  {
    "AllowedOrigins": ["*"],
    "AllowedMethods": ["GET", "HEAD"],
    "AllowedHeaders": ["*"],
    "MaxAgeSeconds": 3600
  }
]
```

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
npm run dev

# –ü—Ä–æ–¥–∞–∫—à–Ω –±–∏–ª–¥
npm run build

# –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –±–∏–ª–¥–∞
npm run preview

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å git
git status

# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∫–æ–º–º–∏—Ç
git add .
git commit -m "Your message"
git push
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏

- **–õ–æ–≥–∏ –¥–µ–ø–ª–æ—è**: Cloudflare Dashboard ‚Üí Pages ‚Üí –í–∞—à –ø—Ä–æ–µ–∫—Ç ‚Üí Deployments
- **Analytics**: Cloudflare Dashboard ‚Üí Pages ‚Üí –í–∞—à –ø—Ä–æ–µ–∫—Ç ‚Üí Analytics
- **Real-time logs**: Cloudflare Dashboard ‚Üí Pages ‚Üí –í–∞—à –ø—Ä–æ–µ–∫—Ç ‚Üí Functions (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è)

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

–§–∞–π–ª `public/_headers` —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è:
- –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∞—Å—Å–µ—Ç—ã (JS, CSS, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è): 1 –≥–æ–¥
- HTML: –±–µ–∑ –∫—ç—à–∞ (–≤—Å–µ–≥–¥–∞ —Å–≤–µ–∂–∏–π)

### Security Headers

–í `_headers` —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã –±–∞–∑–æ–≤—ã–µ security headers:
- `X-Frame-Options: DENY`
- `X-Content-Type-Options: nosniff`
- `Referrer-Policy: strict-origin-when-cross-origin`

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

- [Cloudflare Pages Docs](https://developers.cloudflare.com/pages/)
- [Vite Docs](https://vitejs.dev/)
- [React Router Docs](https://reactrouter.com/)

---

**–ì–æ—Ç–æ–≤–æ!** üöÄ –í–∞—à –ø—Ä–æ–µ–∫—Ç DushanbeMotion –≥–æ—Ç–æ–≤ –∫ –¥–µ–ø–ª–æ—é –Ω–∞ Cloudflare Pages.

